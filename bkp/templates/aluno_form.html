{% extends 'base.html' %}
{% block title %}{{ 'Editar aluno' if aluno else 'Cadastrar aluno' }}{% endblock %}
{% block content %}
<div class="container py-3">
  <div class="card">
    <div class="card-body">
      <h4 class="mb-3">{{ 'Editar aluno' if aluno else 'Cadastrar aluno' }}</h4>
      <form method="post" enctype="multipart/form-data">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nome completo</label>
            <input type="text" name="nome" class="form-control" required value="{{ aluno.nome if aluno else '' }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Telefone da mãe</label>
            <input type="text" name="telefone_mae" class="form-control" value="{{ aluno.telefone_mae if aluno else '' }}" placeholder="(xx) xxxxx-xxxx">
          </div>

          <div class="col-md-4">
            <label class="form-label">Escola</label>
            <select name="escola_id" class="form-select">
              <option value="">Selecione</option>
              {% for e in escolas %}
                <option value="{{ e.id }}" {% if aluno and aluno.escola_id==e.id %}selected{% endif %}>{{ e.nome }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-4">
            <label class="form-label">Série</label>
            <select name="serie_id" class="form-select">
              <option value="">Selecione</option>
              {% for s in series %}
                <option value="{{ s.id }}" {% if aluno and aluno.serie_id==s.id %}selected{% endif %}>{{ s.nome }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-4">
            <label class="form-label">Horário</label>
            <select name="horario_id" class="form-select">
              <option value="">Selecione</option>
              {% for h in horarios %}
                <option value="{{ h.id }}" {% if aluno and aluno.horario_id==h.id %}selected{% endif %}>{{ h.label }}</option>
              {% endfor %}
            </select>
          </div>

          <!-- Campo de foto opcional (salvamento do arquivo deve ser implementado na rota se quiser persistir) -->
          <div class="col-md-6 d-none">
            <label class="form-label">Foto do aluno</label>
            <input type="file" name="foto" class="form-control">
          </div>

          <div class="col-12 d-flex justify-content-end gap-2">
            <a href="{{ url_for('alunos.listar') }}" class="btn btn-outline-light">Voltar</a>
            <button class="btn btn-light">{{ 'Salvar alterações' if aluno else 'Cadastrar aluno' }}</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
