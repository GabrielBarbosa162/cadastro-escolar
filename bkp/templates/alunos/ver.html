{% extends "base.html" %}
{% block content %}

<div class="page-title-row mb-3">
  <div>
    <h2>Dados do aluno</h2>
    <div class="subtitle">Visualização do cadastro completo.</div>
  </div>
  <div>
    <a href="{{ url_for('alunos_list') }}" class="btn btn-outline-light btn-sm">
      Voltar para lista
    </a>
  </div>
</div>

<section class="card bg-dark border-secondary">
  <div class="card-body">
    <div class="row g-4">
      <div class="col-md-3 d-flex flex-column align-items-center text-center">
        {% if aluno.foto_path %}
          <img src="{{ aluno.foto_path }}"
               alt="Foto de {{ aluno.nome }}"
               style="width:140px; height:140px; border-radius:50%; object-fit:cover; border:2px solid #22c55e; margin-bottom:0.75rem;">
        {% else %}
          <div style="width:140px; height:140px; border-radius:50%;
                      display:flex; align-items:center; justify-content:center;
                      background:#020617; border:2px solid #1f2937; margin-bottom:0.75rem;
                      font-size:2.5rem; color:#9ca3af;">
            {{ aluno.nome[0]|upper }}
          </div>
        {% endif %}

        <h5 class="mb-1">{{ aluno.nome }}</h5>
        <p class="text-muted small mb-0">
          {% if aluno.serie %}{{ aluno.serie.nome }}{% else %}Série não informada{% endif %}
          <br>
          {% if aluno.escola %}{{ aluno.escola.nome }}{% else %}Escola não informada{% endif %}
        </p>
      </div>

      <div class="col-md-9">
        <div class="row g-3">
          <div class="col-md-4">
            <span class="form-label">Data de nascimento</span>
            <div class="text-white">
              {% if aluno.data_nascimento %}
                {{ aluno.data_nascimento.strftime('%d/%m/%Y') }}
              {% else %}
                <span class="text-muted">Não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-md-2">
            <span class="form-label">Idade</span>
            <div class="text-white">
              {% if aluno.idade %}
                {{ aluno.idade }} anos
              {% else %}
                <span class="text-muted">Não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-md-2">
            <span class="form-label">Sexo</span>
            <div class="text-white">
              {% if aluno.sexo == 'M' %}Masculino{% elif aluno.sexo == 'F' %}Feminino{% else %}
                <span class="text-muted">Não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-md-4">
            <span class="form-label">Horário</span>
            <div class="text-white">
              {% if aluno.horario %}
                {{ aluno.horario.hora_inicio }} - {{ aluno.horario.hora_fim }}
              {% else %}
                <span class="text-muted">Não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-md-6">
            <span class="form-label">Nome do pai</span>
            <div class="text-white">
              {{ aluno.nome_pai or 'Não informado' }}
            </div>
          </div>

          <div class="col-md-6">
            <span class="form-label">Nome da mãe</span>
            <div class="text-white">
              {{ aluno.nome_mae or 'Não informado' }}
            </div>
          </div>

          <div class="col-md-8">
            <span class="form-label">Endereço</span>
            <div class="text-white">
              {% if aluno.endereco %}
                {{ aluno.endereco }}
                {% if aluno.numero %}, {{ aluno.numero }}{% endif %}
                {% if aluno.bairro %} - {{ aluno.bairro }}{% endif %}
              {% else %}
                <span class="text-muted">Não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-md-4">
            <span class="form-label">Telefones</span>
            <div class="text-white">
              {% if aluno.telefone_cel %}
                <span class="badge bg-secondary me-1">{{ aluno.telefone_cel }}</span>
              {% endif %}
              {% if aluno.telefone_fixo %}
                <span class="badge bg-secondary">{{ aluno.telefone_fixo }}</span>
              {% endif %}
              {% if not aluno.telefone_cel and not aluno.telefone_fixo %}
                <span class="text-muted">Não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-md-6">
            <span class="form-label">Naturalidade</span>
            <div class="text-white">
              {{ aluno.naturalidade or 'Não informado' }}
            </div>
          </div>

          <div class="col-md-6">
            <span class="form-label">Nacionalidade</span>
            <div class="text-white">
              {{ aluno.nacionalidade or 'Não informado' }}
            </div>
          </div>

          <div class="col-md-6">
            <span class="form-label">Início das aulas</span>
            <div class="text-white">
              {% if aluno.inicio_aulas %}
                {{ aluno.inicio_aulas.strftime('%d/%m/%Y') }}
              {% else %}
                <span class="text-muted">Não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-md-6">
            <span class="form-label">Mensalidade / plano</span>
            <div class="text-white">
              {{ aluno.mensalidade_opcao or 'Não informado' }}
            </div>
          </div>

          <div class="col-md-6">
            <span class="form-label">Dificuldades</span>
            <div class="text-white">
              {% if aluno.tem_dificuldade %}
                {{ aluno.qual_dificuldade or 'Sim, mas não detalhado' }}
              {% else %}
                <span class="text-muted">Nenhuma ou não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-md-6">
            <span class="form-label">Medicamentos</span>
            <div class="text-white">
              {% if aluno.toma_medicamento %}
                {{ aluno.qual_medicamento or 'Sim, mas não detalhado' }}
              {% else %}
                <span class="text-muted">Nenhum ou não informado</span>
              {% endif %}
            </div>
          </div>

          <div class="col-12">
            <span class="form-label">Observações</span>
            <div class="text-white">
              {{ aluno.observacoes or 'Sem observações.' }}
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

{% endblock %}
